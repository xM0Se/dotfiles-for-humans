/*
Copyright 2019 @foostan
Copyright 2020 Drashna Jaelre <@drashna>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

#include QMK_KEYBOARD_H
#include "tap-dances.h"
#include "layers.h"

/* ----------------------------------------------------------------------------------------------------------------------------------------------------- */
/* COMBOS */

const uint16_t PROGMEM esc_n_r[] = {RALT_T(KC_N), LGUI_T(KC_R), COMBO_END};
const uint16_t PROGMEM homerow_c_k[] = {KC_C, KC_K, COMBO_END};
const uint16_t PROGMEM homerow_scroll_g_m[] = {KC_G, KC_M, COMBO_END};
const uint16_t PROGMEM tab_shift_space[] = {TD(TD_SFT_TT2), TD(TD_SPC_ENT_TT1), COMBO_END};
const uint16_t PROGMEM delete_shift_bspc[] = {TD(TD_SFT_TT2), TD(TD_ALT_BSPC_TT3), COMBO_END};
combo_t key_combos[] = {
    COMBO(esc_n_r, KC_ESC),
    COMBO(homerow_c_k, MEH(KC_C)),
    COMBO(homerow_scroll_g_m, MEH(KC_G)),
    COMBO(tab_shift_space, KC_TAB),
    COMBO(delete_shift_bspc, KC_DEL),
};

/* ----------------------------------------------------------------------------------------------------------------------------------------------------- */
/* KEYMAP */

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

    [0] = LAYOUT_split_3x6_3(
  //,-----------------------------------------------------------------------------------------------------------------------.                                                           ,-----------------------------------------------------------------------------------------------------------------------.
      TO(5),              KC_Q,               KC_W,               KC_F,               KC_P,              KC_B,                                                                           KC_J,               KC_L,                    KC_U,               KC_Y,               MEH(KC_L),          MEH(KC_U),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                                                           |-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|
      MEH(KC_A),          KC_A,               LGUI_T(KC_R),      LCTL_T(KC_S),       LALT_T(KC_T),       KC_G,                                                                           KC_M,               RALT_T(KC_N),            RCTL_T(KC_E),       RGUI_T(KC_I),       KC_O,       MEH(KC_P),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                                                           |-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|
      MEH(KC_Z),          KC_Z,               KC_X,               KC_C,              KC_D,               KC_V,                                                                           KC_K,               KC_H,                    KC_DOT,             KC_COMM,            MEH(KC_X),          MEH(KC_H),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                                                           |-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                     KC_NO,              TD(TD_SPC_ENT_TT1),  KC_NO,                           TD(TD_ALT_BSPC_TT3),   TD(TD_SFT_TT2),   KC_NO
                                                                                  //`-------------------+-------------------+-------------------'                   |`------------------+-------------------+-------------------'

  ),

    [1] = LAYOUT_split_3x6_3(
  //,-----------------------------------------------------------------------------------------------------------------------.                    ,----------------------------------------------------------------------------------------------------------------------------.
      KC_F1,              KC_F2,              KC_F3,              KC_F4,              KC_F5,              KC_F6,                                    KC_F7,              KC_F8,                   KC_F9,              KC_F10,             KC_F11,             KC_F12,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      HYPR(KC_Q),         KC_1,               LGUI_T(KC_2),       LCTL_T(KC_3),       LALT_T(KC_4),       KC_5,                                     KC_6,               RALT_T(KC_7),            RCTL_T(KC_8),       RGUI_T(KC_9),       KC_0,               HYPR(KC_0),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      HYPR(KC_W),         HYPR(KC_F),         HYPR(KC_P),         HYPR(KC_B),         HYPR(KC_J),         HYPR(KC_L),                               HYPR(KC_U),         HYPR(KC_A),              KC_DOT,            KC_COMM,         HYPR(KC_T),         HYPR(KC_E),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            TO(0),   _______,   TT(2),     _______,   _______,   TT(3)
                                                                                                        //`--------------------------'  `--------------------------'

  ),

    [2] = LAYOUT_split_3x6_3(
  //,-----------------------------------------------------------------------------------------------------------------------.                    ,----------------------------------------------------------------------------------------------------------------------------.
      MEH(KC_B),          KC_NO,              KC_PERC,            KC_PIPE,            KC_PPLS,            KC_AT,                                    TD(TD_ABK),            KC_AMPR,             KC_TILD,              KC_DQUO,            KC_NO,            MEH(KC_J),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      MEH(KC_G),          KC_GRV,             TD(TD_PRN_GUI),    TD(TD_BRC_CTL),     TD(TD_CBR_ALT),    KC_DLR,                                      KC_EXLM,            TD(TD_COLN_ALT),         TD(TD_MINS_CTL),    TD(TD_SLSH_GUI),     KC_SCLN,           MEH(KC_M),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      MEH(KC_V),          KC_NO,             KC_PEQL,          KC_PAST,               KC_QUES,            KC_CIRC,                                  KC_EQL,            KC_UNDS,                 KC_DOT,            KC_COMM,            KC_HASH,            MEH(KC_K),
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            TO(0),   _______,   TT(3),     _______,   _______,   KC_NO
                                                                                                        //`--------------------------'  `--------------------------'

  ),

    [3] = LAYOUT_split_3x6_3(
  //,-----------------------------------------------------------------------------------------------------------------------.                    ,----------------------------------------------------------------------------------------------------------------------------.
      QK_BOOT,            XXXXXXX,            XXXXXXX,            XXXXXXX,            XXXXXXX,            XXXXXXX,                                  XXXXXXX,            XXXXXXX,                 XXXXXXX,            XXXXXXX,            XXXXXXX,            XXXXXXX,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      RM_TOGG,            RM_HUEU,            RM_SATU,            RM_VALU,            XXXXXXX,            XXXXXXX,                                  XXXXXXX,            XXXXXXX,                 XXXXXXX,            XXXXXXX,            XXXXXXX,            XXXXXXX,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      RM_NEXT,            RM_HUED,            RM_SATD,            RM_VALD,            XXXXXXX,            XXXXXXX,                                  XXXXXXX,            XXXXXXX,                 XXXXXXX,            XXXXXXX,            XXXXXXX,            XXXXXXX,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            KC_LGUI,  _______,  KC_SPC,     KC_ENT,   _______,  KC_RALT
                                                                                                        //`--------------------------'  `--------------------------'
  ),

    [4] = LAYOUT_split_3x6_3(

  //,-----------------------------------------------------------------------------------------------------------------------.                    ,---------------------------------------------------------------------------------------------------------------------------.
      KC_NO,            KC_NO,               KC_NO,               KC_NO,             KC_NO,               KC_NO,                                   KC_DOWN,             KC_RIGHT,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_NO,               KC_NO,               KC_NO,             KC_NO,               KC_NO,                                   KC_NO,             KC_NO,                 KC_NO,            KC_NO,              KC_RGHT,            KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_NO,               KC_NO,               KC_NO,             KC_NO,               KC_NO,                                   KC_UP,             KC_LEFT,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            TO(0),  _______,  KC_SPC,     KC_ENT,   _______,  KC_RALT
                                                                                                        //`--------------------------'  `--------------------------'
  ),
    [5] = LAYOUT_split_3x6_3(

  //,-----------------------------------------------------------------------------------------------------------------------.                    ,---------------------------------------------------------------------------------------------------------------------------.
      KC_NO,            KC_C,                KC_G,                KC_L,              KC_D,                KC_NO,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            LSFT(KC_F),          LSFT(KC_E),          LSFT(KC_S),        KC_DELETE,           KC_NO,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_NO,               KC_NO,               LSG(KC_Z),         LGUI(KC_Z),          KC_NO,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            TO(0),   TO(6),  KC_ESC,     KC_ENT,   _______,  KC_RALT
                                                                                                        //`--------------------------'  `--------------------------'
  ),
    [6] = LAYOUT_split_3x6_3(

  //,-----------------------------------------------------------------------------------------------------------------------.                    ,---------------------------------------------------------------------------------------------------------------------------.
      KC_NO,            KC_7,                KC_8,                KC_9,              KC_ENT,              KC_M,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_4,                KC_5,                KC_6,              KC_DOT,              KC_C,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_1,                KC_2,                KC_3,              KC_0,                KC_NO,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            TO(0),   TO(5),  KC_BSPC,     KC_ENT,   _______,  KC_RALT
                                                                                                        //`--------------------------'  `--------------------------'
  ),
    [6] = LAYOUT_split_3x6_3(

  //,-----------------------------------------------------------------------------------------------------------------------.                    ,---------------------------------------------------------------------------------------------------------------------------.
      KC_NO,            KC_7,                KC_8,                KC_9,              KC_ENT,              KC_M,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_4,                KC_5,                KC_6,              KC_DOT,              KC_C,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
      KC_NO,            KC_1,                KC_2,                KC_3,              KC_0,                KC_NO,                                   KC_NO,             KC_NO,                   KC_NO,              KC_NO,              KC_NO,              KC_NO,
  //|-------------------+-------------------+-------------------+-------------------+-------------------+-------------------|                    |-------------------+------------------------+-------------------+-------------------+-------------------+-------------------|
                                                                                                            TO(0),   TO(5),  KC_BSPC,     KC_ENT,   _______,  KC_RALT
     
        ),
};

#ifdef ENCODER_MAP_ENABLE
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][NUM_DIRECTIONS] = {
  [0] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_MPRV, KC_MNXT), ENCODER_CCW_CW(RM_VALD, RM_VALU), ENCODER_CCW_CW(KC_RGHT, KC_LEFT), },
  [1] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_MPRV, KC_MNXT), ENCODER_CCW_CW(RM_VALD, RM_VALU), ENCODER_CCW_CW(KC_RGHT, KC_LEFT), },
  [2] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_MPRV, KC_MNXT), ENCODER_CCW_CW(RM_VALD, RM_VALU), ENCODER_CCW_CW(KC_RGHT, KC_LEFT), },
  [3] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_MPRV, KC_MNXT), ENCODER_CCW_CW(RM_VALD, RM_VALU), ENCODER_CCW_CW(KC_RGHT, KC_LEFT), },
};

#endif
#ifdef RGB_MATRIX_ENABLE
void keyboard_post_init_user(void) {
    // Set default color to blue (HSV: Hue=170, Sat=255, Val=150)
    rgb_matrix_sethsv(170, 255, 150);
}
#endif


#ifdef OLED_ENABLE

bool oled_task_user(void) {

    if (is_keyboard_master()) {


        switch (get_highest_layer(layer_state)) {
            case _default_layer:
                oled_write("main layer", false);
                break;
            case _number_layer:
                oled_write("number layer", false);
                break;
            case _symbol_layer:
                oled_write("symbol layer", false);
                break;
            case _keyboard_layer:
                oled_write("idk layer", false);
                break;
            case _arrow_layer:
                oled_write("arrow layer", false);
                break;
        }
        return false;


    } else { /* left side ^ */ /* rigth side */

        oled_write("hello world",false);

    }
    return false;
}

#endif
#include "tap-dances.c"
